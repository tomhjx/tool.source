{{ $_hugo_config := `{ "version": 1 }` }}
{{ $blockID := printf "mermaideditorcontainer%d" .Ordinal }}

Here is one mermaid diagram:
<pre class="mermaid">
        graph TD 
        A[Client] --> B[Load Balancer] 
        B --> C[Server1] 
        B --> D[Server2]
</pre>

And here is another:
<pre class="mermaid">
        graph TD 
        A[Client] -->|tcp_123| B
        B(Load Balancer) 
        B -->|tcp_456| C[Server1] 
        B -->|tcp_456| D[Server2]
</pre>

<div id="{{ $blockID  }}" contenteditable="true" class="border w-100"></div>
<div id="{{ $blockID  }}-output"></div>

<script type="module">
import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/+esm';
mermaid.initialize({ startOnLoad: true });
    $(function(){
        var blockID = "{{ $blockID  }}";
        var input = document.getElementById(blockID);
        var output = document.getElementById(blockID+'-output');

        input.onkeyup = function() {
                mermaid.render('theGraph', input.value, function(svgCode) {
                        output.innerHTML = svgCode;
                });
        }
    })

</script>

