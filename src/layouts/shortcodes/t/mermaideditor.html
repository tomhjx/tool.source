{{ $_hugo_config := `{ "version": 1 }` }}
{{ $blockID := printf "mermaideditorcontainer%d" .Ordinal }}



<div class="container text-left">
        <div class="row">
          <div class="col">
                <textarea id="{{ $blockID  }}" class="border w-100" style="height: 200px;" ></textarea>
          </div>
          <div class="col">
                <button type="button" class="btn btn-primary">Copy Image</button>
          </div>
        </div>

        <div class="row">
                <div id="{{ $blockID  }}-output" class="col">
                </div>
        </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script >
    mermaid.initialize({startOnLoad:false});
    $(function(){
        console.log("v2023-02-23 01:01:43")
        var blockID = "{{ $blockID  }}";
        var input = document.getElementById(blockID);
        var output = document.getElementById(blockID+'-output');

        input.onkeyup = function() {
                mermaid.mermaidAPI.render('theGraph', input.value, function(svgCode) {
                        output.innerHTML = svgCode;
                });
        }
        // svg to png
        // https://javascript.plainenglish.io/3-steps-to-convert-svgs-to-image-file-formats-png-in-javascript-5394bf837185
    })

</script>

